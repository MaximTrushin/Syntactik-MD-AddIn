<?xml version="1.0" encoding="utf-8" ?>
<SyntaxMode name = "syntactik4xml" mimeTypes="text/x-syntactik4xml">

  <!-- single line comment -->
  <EolSpan color = "Comment(Line)" rule="comment">'''</EolSpan>
  <!-- multi line comment -->
  <Span color = "Comment(Line)"  rule="comment">
    <Begin>"""</Begin>
    <End>"""</End>
  </Span>

<!-- wsa -->
<Span color = "Punctuation" rule ="wsa">
  <Begin>(</Begin>
  <End>)</End>
</Span>
  
<Match color = "Punctuation">:=</Match>  
<Match color = "Punctuation">::</Match>
<Match color = "Punctuation">:</Match>
<Match color = "Punctuation">=::</Match>
<Match color = "Punctuation">=:</Match>
  
<!-- open string -->
<Span color = "String" rule ="open_string" tagColor="Punctuation">
  <Begin>==</Begin>
</Span>

<Rule name = "open_string">
 
</Rule>  
  
<Rule name = "sq_string">
  <!--valid escape-->
  <Match color = "Diff Header">\\["'\\\/bfnrt]</Match>
  <!-- utf encode-->
  <Match color = "Diff Header">\\u[a-fA-F0-9]{0,4}</Match>
  <!--Alias or parameter with brackets-->
  <Match color = "Diff Header">\\(?:\$|!%)\([ \t]*(?:(?:_|[A-Z]|[a-z]|[\xC0-\xD6]|[\xD8-\xF6]|[\xF8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD])(?:[A-Z]|[a-z]|[\xC0-\xD6]|[\xD8-\xF6]|[\xF8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD]|-|\.|[0-9]|\xB7|[\u0300-\u036F]|[\u203F-\u2040])*)[ \t]*\)?</Match>
  <!--Alias or parameter without brakets-->
  <Match color = "Diff Header">\\(?:\$|!%)(?:(?:_|[A-Z]|[a-z]|[\xC0-\xD6]|[\xD8-\xF6]|[\xF8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD])(?:[A-Z]|[a-z]|[\xC0-\xD6]|[\xD8-\xF6]|[\xF8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD]|-|\.|[0-9]|\xB7|[\u0300-\u036F]|[\u203F-\u2040])*)</Match>
  <!--invalid escape-->
  <Match color = "Diff Header">\\.</Match>
</Rule>  
 
  
<!-- free open string -->
<Span color = "Punctuation" rule ="free_open_string">
  <Begin>=</Begin>
</Span>

<Rule name = "free_open_string">
  <Match color = "String">(.*)</Match>
</Rule>  

  
  
  <!-- open string -->
  <Match expression="(\s*==\s*)([^=:()'&quot;,]*)">
    <Group color = "Punctuation"/>
    <Group color = "String"/>
  </Match>

  <!-- free open string -->
  <Match expression="(\s*=\s*)(.*)">
    <Group color = "Punctuation"/>
    <Group color = "String"/>
  </Match>

  <!-- sq name -->
  <Match color = "Keyword(Type)">'(?:\\.|.)*?(?:'|$)</Match>
  <!-- dq name -->
  <Match color = "Keyword(Type)">".*?(?:"|$)</Match>

  <!-- parameter -->
  <Match color = "Keyword(Exception)">\s*!%[^=:()'",]*</Match>

  <!-- argument -->
  <Match color = "Keyword(Exception)">\s*%[^=:()'",]*</Match>
  
  <!-- document & alias def-->
  <Match color = "User Types">\s*![^=:()'",]*</Match>

  <!-- alias -->
  <Match color = "Diff Header">\s*\$[^=:()'",]*</Match>

  <!--
  <Match expression="(\#[\w\.\-]+)(\s*=)(.*)">
    <Group color = "Keyword(Declaration)"/>
    <Group color = "Punctuation"/>
    <Group color = "String"/>
  </Match>

  <Match expression="(#[\w\-]+.)">
    <Group color = "Keyword(Declaration)"/>
  </Match>

  <Match expression="(\@[\w\.\-]*)">
    <Group color = "String(Escape)"/>
  </Match>

  <Match expression="(\%[\w\.\-]*)">
    <Group color = "Keyword(Exception)"/>
  </Match>
  
  <Match expression="(=\s*)(`[^\s]*)">
    <Group color = "Punctuation"/>
    <Group color = "String"/>
  </Match>

  <Match expression="(=\s*)">
    <Group color = "Punctuation"/>
    <Group color = "String"/>
  </Match>
-->

  <!-- open name -->
  <Match color = "Keyword(Type)">\s*[^=:()'",]+</Match>  
  
  <Rule name = "wsa">

    <!-- single line comment -->
    <EolSpan color = "Comment(Line)" rule="comment">'''</EolSpan>
    <!-- multi line comment -->
    <Span color = "Comment(Line)"  rule="comment">
      <Begin>"""</Begin>
      <End>"""</End>
    </Span>    
    
    <!-- sq string value -->
    <Match expression="(==?\s*)('(?:\\.|.)*?(?:'|$))">
      <Group color = "Punctuation"/>
      <Group color = "String"/>
    </Match>

    <!-- dq string value -->
    <Match expression="(==?\s*)(&quot;.*?(?:&quot;|$))">
      <Group color = "Punctuation"/>
      <Group color = "String"/>
    </Match>

    <!-- open string value -->
    <Match expression="(==?\s*)([^=:()'&quot;,]*)">
      <Group color = "Punctuation"/>
      <Group color = "String"/>
    </Match>

    <!-- parameter -->
    <Match color = "Keyword(Exception)">\s*!%[^=:()'",]*</Match>

    <!-- argument -->
    <Match color = "Keyword(Exception)">\s*%[^=:()'",]*</Match>

    <!-- document & alias def-->
    <Match color = "User Types">\s*![^=:()'",]*</Match>

    <!-- alias -->
    <Match color = "Diff Header">\s*\$[^=:()'",]*</Match>

    <!-- sq name -->
    <Match color = "Keyword(Type)">'(?:\\.|.)*?(?:'|$)</Match>
    
    <!-- dq name -->
    <Match color = "Keyword(Type)">".*?(?:"|$)</Match>
    
    <!-- open name -->
    <Match color = "Keyword(Type)">\s?[^=:()'",]+</Match>

  </Rule>  
  
  <Rule name = "comment">
  </Rule>
  <Rule name = "delimiter">
  </Rule> 
 
  
 
</SyntaxMode>